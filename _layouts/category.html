---
layout: calendar
title: Расписание
---
{% assign posts = paginator.posts | sort: "slug" %}
<main class="container">
    <h1>{{ page.title }}</h1>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const calendarEl = document.getElementById('calendar');

            const calendar = new FullCalendar.Calendar(calendarEl, {
                plugins: ['interaction', 'bootstrap', 'dayGrid', 'timeGrid', 'list'],
                locale: 'en',
                themeSystem: "bootstrap",
                firstDay: 1,
                header: {
                    left: 'prev,next today',
                    center: false,
                    right: 'dayGridMonth,timeGridWeek,listMonth'
                },
                businessHours: [
                    {
                        daysOfWeek: [1, 2, 3, 4, 5],
                        startTime: '18:00',
                        endTime: '22:00'
                    },
                    {
                        daysOfWeek: [6, 7],
                        startTime: '10:00',
                        endTime: '22:00'
                    }],
                displayEventTime: true,
                timeZone: "local",
                defaultDate: Date.now(),
                navLinks: true,
                theme: "darkly",
                editable: false,
                events: [
                    {% for post in posts %}
                        {% assign events = site.events | where_exp: "item", "item.slug == post.slug" | where_exp: "item", "item.date >= site.time" %}
                        {% capture category %}{{ post.categories | first }}{% endcapture %}
                        {% for event in events %}
                            {
                                title: '{{ site.data.trainings[event.slug] }}',
                                start: '{{ event.date | date: "%Y-%m-%d" }}T{{ event.time_start }}',
                                end: '{{ event.date | date: "%Y-%m-%d" }}T{{ event.time_end }}',
                                constraint: 'businessHours',
                                url: '/trainings/{{ event.slug }}/',
                                color: '{{ site.data.colors[category] }}'
                            },
                        {% endfor %}
                    {% endfor %}
                ]
            });
            calendar.render();
        });
    </script>
    <div id="calendar" class="container"></div>
</main>
